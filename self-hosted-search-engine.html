<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>
      
    自建搜索引擎 - 永久记录
    
    </title>
    

    
    
    <link href="atom.xml" rel="alternate" title="永久记录" type="application/atom+xml">
    <link rel="stylesheet" href="asset/css/style.min.css">
    <link rel="stylesheet" href="asset/css/doc.css">
    <script src="asset/app.js"></script>
</head>
  <body>
    <section class="hero">
      <div class="hero-head">
          <nav class="navbar" role="navigation" aria-label="main navigation">
              <div class="container">
              <div class="navbar-brand">
                
                <a target="_self" class="navbar-item " href="index.html">Home</a>
                
                <a target="_self" class="navbar-item " href="archives.html">Archives</a>
                
                <a target="_self" class="navbar-item " href="about.html">About</a>
                

                <a role="button" id="navbarSNSRssSwitchBtn" class="navbar-burger burger" aria-label="menu" aria-expanded="false" data-target="navbarSNSRssButtons">
                  <span aria-hidden="true"></span>
                  <span aria-hidden="true"></span>
                  <span aria-hidden="true"></span>
                </a>
              </div>
            
              <div id="navbarSNSRssButtons" class="navbar-menu">
                <div class="navbar-start">
                  
                </div>
            
                <div class="navbar-end">
                  <div class="navbar-item">
                    <!--buttons start-->
                    <div class="buttons">
                      
                        
                        
                        
                        
                      
                      <a href="atom.xml" target="_blank" title="RSS">
                          <span class="icon is-large has-text-black-bis">
                              <svg class="svg-inline--fa fa-rss fa-w-14 fa-lg" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="rss" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" data-fa-i2svg=""><path fill="currentColor" d="M128.081 415.959c0 35.369-28.672 64.041-64.041 64.041S0 451.328 0 415.959s28.672-64.041 64.041-64.041 64.04 28.673 64.04 64.041zm175.66 47.25c-8.354-154.6-132.185-278.587-286.95-286.95C7.656 175.765 0 183.105 0 192.253v48.069c0 8.415 6.49 15.472 14.887 16.018 111.832 7.284 201.473 96.702 208.772 208.772.547 8.397 7.604 14.887 16.018 14.887h48.069c9.149.001 16.489-7.655 15.995-16.79zm144.249.288C439.596 229.677 251.465 40.445 16.503 32.01 7.473 31.686 0 38.981 0 48.016v48.068c0 8.625 6.835 15.645 15.453 15.999 191.179 7.839 344.627 161.316 352.465 352.465.353 8.618 7.373 15.453 15.999 15.453h48.068c9.034-.001 16.329-7.474 16.005-16.504z"></path></svg><!-- <i class="fas fa-rss fa-lg"></i> -->
                          </span>
                      </a>
                    </div>
                    <!--buttons end-->

                  </div>
                </div>
                </div>
              </div>
            </nav>
      </div>

 <div class="hero-body ct-body"></div>
      
    </section>
    <section class="ct-body">
      <div class="container">
          <div class="columns is-variable bd-klmn-columns is-4 is-centered">
              <div class="column is-four-fifths">
                  <div class="post-body single-content">
                    
                    <h1 class="title">
                            自建搜索引擎   
                      </h1>
                     
                    
                      <div class="media">
                            
                            <div class="media-content">
                              <div class="content">
                                <p>
                                 <span class="date">2024/07/11</span>
                                  
                                         
                                  

                                   
                                      
                                  <br />
                                  <span class="tran-tags">Tags:</span>&nbsp;
                                  
                                    <a class="tag is-link is-light" href='tag_%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E.html'>#搜索引擎</a>
                                     

                                </p>
                              </div>
                            </div>
                         
                    </div>
                </div>
                  <article class="markdown-body single-content">
                    <div class="mweb_toc"><ul>
<li><a href="#%E5%85%AC%E5%85%B1%E5%AE%9E%E4%BE%8B">公共实例</a></li>
<li><a href="#whoogle-search">Whoogle Search</a></li>
<li><a href="#searxng">SearXNG</a></li>
<li><a href="#yacy">YaCy</a></li>
<li><a href="#%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8Fzerotier">内网穿透Zerotier</a></li>
<li><a href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99">参考资料</a></li>
</ul>
</div>
<p>中国大陆网络搜索环境逐渐恶化，信息检索结果缺乏真实性和可信度。当然用户可以选择国外的搜索引擎直接使用，但这些搜索引擎不保证稳定性或被墙的可能性。有条件的用户可以在自己的VPS上自建搜索引擎，并通过内网穿透使用。比较有名的有Whoogle Search，SearXNG，YaCy等。</p>
<h2><a id="%E5%85%AC%E5%85%B1%E5%AE%9E%E4%BE%8B" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>公共实例</h2>
<p>如果不想自建搜索引擎，也可以直接使用公共实例。</p>
<ul>
<li>Searx Public Instances <a href="https://searx.space">https://searx.space</a></li>
<li>Whoogle Public Instances <a href="https://github.com/benbusby/whoogle-search?tab=readme-ov-file#public-instances">https://github.com/benbusby/whoogle-search?tab=readme-ov-file#public-instances</a></li>
<li>其他<a href="search-engine.html">网络搜索引擎</a></li>
</ul>
<h2><a id="whoogle-search" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>Whoogle Search</h2>
<p>Whoogle Search 搜索结果基于Google搜索，没有广告也没有追踪。详细介绍看Github主页<a href="https://github.com/benbusby/whoogle-search">https://github.com/benbusby/whoogle-search</a>。</p>
<p>Docker CLI安装：</p>
<pre class="line-numbers"><code class="language-plain_text">$ sudo docker pull benbusby/whoogle-search
$ sudo docker run --publish 5000:5000 --detach --name whoogle-search benbusby/whoogle-search:latest
</code></pre>
<p>也可以使用docker-compose安装：</p>
<pre class="line-numbers"><code class="language-plain_text">$ git clone https://github.com/benbusby/whoogle-search.git
$ cd whoogle-search
$ sudo docker-compose up
</code></pre>
<p>Whoogle Search的端口为5000。</p>
<h2><a id="searxng" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>SearXNG</h2>
<p>相比Whoogle Search，SearXNG的搜索结果来自多个搜索引擎。</p>
<p>安装searxng-docker：</p>
<pre class="line-numbers"><code class="language-plain_text">$ cd ~
$ mkdir searxng-docker
$ cd searxng-docker
$ vim docker-compose.yaml
</code></pre>
<p>文件<code>docker-compose.yaml</code>的内容（此处参考<a href="https://nougats.cn/searxng/">使用docker搭建SearXNG搜索引擎</a>）：</p>
<pre class="line-numbers"><code class="language-plain_text">version: '3.7'
 
services:
# 我们注释掉caddy的内容
  #  caddy:
  #  container_name: caddy
  #  image: caddy:2-alpine
  #  network_mode: host
  #  volumes:
  #    - ./Caddyfile:/etc/caddy/Caddyfile:ro
  #    - caddy-data:/data:rw
  #    - caddy-config:/config:rw
  #  environment:
  #    - SEARXNG_HOSTNAME=${SEARXNG_HOSTNAME:-http://localhost:80}
  #    - SEARXNG_TLS=${LETSENCRYPT_EMAIL:-internal}
  #  cap_drop:
  #    - ALL
  #  cap_add:
  #    - NET_BIND_SERVICE
  #    - DAC_OVERRIDE
 
  redis:
    container_name: redis
    image: &quot;redis:alpine&quot;
    command: redis-server --save &quot;&quot; --appendonly &quot;no&quot;
    networks:
      - searxng
    tmpfs:
      - /var/lib/redis
    cap_drop:
      - ALL
    cap_add:
      - SETGID
      - SETUID
      - DAC_OVERRIDE
 
  searxng:
    container_name: searxng
    image: searxng/searxng:latest
    networks:
      - searxng
    ports:
     - &quot;8180:8080&quot;   # 这个冒号左边的端口可以更改，右边的不要改
    volumes:
      - ./searxng:/etc/searxng:rw
    environment:
      - SEARXNG_BASE_URL=https://${SEARXNG_HOSTNAME:-localhost}/
    cap_drop:
      - ALL
    cap_add:
      - CHOWN
      - SETGID
      - SETUID
      - DAC_OVERRIDE
    logging:
      driver: &quot;json-file&quot;
      options:
        max-size: &quot;1m&quot;
        max-file: &quot;1&quot;
networks:
  searxng:
    ipam:
      driver: default
 
        #volumes:
        #caddy-data:
        #caddy-config:
</code></pre>
<p>生成密钥文件：</p>
<pre class="line-numbers"><code class="language-plain_text">$ sed -i &quot;s|ultrasecretkey|$(openssl rand -hex 32)|g&quot; searxng/settings.yml
</code></pre>
<p>个人使用实例可以将<code>searxng/settings.yml</code>中<code>limiter</code>的值改成<code>false</code>。</p>
<p>启动Docker镜像：</p>
<pre class="line-numbers"><code class="language-plain_text">$ sudo docker-compose up -d  
</code></pre>
<p>SearXNG端口为8080。</p>
<h2><a id="yacy" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>YaCy</h2>
<p>YaCy是一款分布式搜索引擎，搜索结果完全由用户自己掌控。YaCy可以单独安装使用，也可以加入P2P将索引分享给其他人使用。</p>
<p>Docker安装(适合intel芯片)：</p>
<pre class="line-numbers"><code class="language-plain_text">$ sudo docker run -d --name yacy_search_server -p 8090:8090 -p 8443:8443 -v yacy_search_server_data:/opt/yacy_search_server/DATA --restart unless-stopped --log-opt max-size=200m --log-opt max-file=2 yacy/yacy_search_server:latest
</code></pre>
<p>YaCy的端口为8090。</p>
<h2><a id="%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8Fzerotier" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>内网穿透Zerotier</h2>
<p>Zerotier是一款不错的内网穿透软件，需要在VPS及自己常用的设备上同时安装。VPS以Linux系统为例。</p>
<p>安装Zerotier：</p>
<pre class="line-numbers"><code class="language-plain_text">$ curl -s 'https://raw.githubusercontent.com/zerotier/ZeroTierOne/main/doc/contact%40zerotier.com.gpg' | gpg --import &amp;&amp; \  
if z=$(curl -s 'https://install.zerotier.com/' | gpg); then echo &quot;$z&quot; | sudo bash; fi
</code></pre>
<p>开机启动Zerotier：</p>
<pre class="line-numbers"><code class="language-plain_text">$ sudo systemctl enable zerotier-one
</code></pre>
<p>加入网络：</p>
<pre class="line-numbers"><code class="language-plain_text">$ sudo zerotier-cli join ################ 
</code></pre>
<p>其中<code>################</code>为你想加入网络的16位ID。然后登录zerotier官网允许设备即可。</p>
<p>同样地，你也需要在日常使用的设备上安装zerotier，在<a href="https://www.zerotier.com/download/">Zerotier网站</a>上下载合适的版本。加入相同网络，并登录zerotier官网允许设备。</p>
<p>在zerotier官网可以查看所加入网络下所有设备的IP地址，记下你的VPS的IP地址。假设VPS的IP地址为<code>10.147.17.102</code>，那么可以通过如下方式访问自建的搜索引擎：</p>
<ul>
<li>Whoogle-search：<a href="http://10.147.17.102:5000">http://10.147.17.102:5000</a></li>
<li>SearXNG：<a href="http://10.147.17.102:8080">http://10.147.17.102:8080</a></li>
<li>YaCy：<a href="http://10.147.17.102:8090">http://10.147.17.102:8090</a></li>
</ul>
<h2><a id="%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>参考资料</h2>
<ul>
<li>SearXNG Docker <a href="https://github.com/searxng/searxng-docker">https://github.com/searxng/searxng-docker</a></li>
<li>SearXNG Github <a href="https://github.com/searxng/searxng">https://github.com/searxng/searxng</a></li>
<li>whoogle Search <a href="https://github.com/benbusby/whoogle-search">https://github.com/benbusby/whoogle-search</a></li>
<li>YaCy Github <a href="https://github.com/yacy/yacy_search_server">https://github.com/yacy/yacy_search_server</a></li>
<li>YaCy Homepage <a href="https://yacy.net/">https://yacy.net</a></li>
<li>P2P分布式搜索引擎YaCy <a href="https://blog.csdn.net/wbsu2004/article/details/127646231">https://blog.csdn.net/wbsu2004/article/details/127646231</a></li>
<li>使用docker搭建SearXNG搜索引擎 <a href="https://nougats.cn/searxng/">https://nougats.cn/searxng</a></li>
</ul>

                  </article>
                  <div class="comments-wrap">
                    <div class="share-comments">
                      

                      

                      
                    </div>
                  </div><!-- end comments wrap -->
              </div>
            </div><!-- end columns -->
      </div><!-- end container -->
    </section>



    <footer class="footer">
        <div class="content has-text-centered">
          <p>
              Copyright &copy; 2024
              Powered by <a target="_blank" href="https://www.mweb.im">MWeb</a>,&nbsp; 
              Theme used <a target="_blank" href="https://bulma.io/">Bulma CSS</a>.
          </p>
        </div>
      </footer>



<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script type="text/x-mathjax-config">MathJax.Hub.Config({TeX: { equationNumbers: { autoNumber: "AMS" } }});</script>

  













<script src="asset/prism.js"></script>



  
    




  </body>
</html>
